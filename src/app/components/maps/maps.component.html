<div class="container-fluid" xstyl="margin-top:160px">
  <div class="content">
    <agm-map id="maps-flood-watch" [fitBounds]="true" accuracy=100 [latitude]="this.mapsForm.get('latitude').value"
      [longitude]="this.mapsForm.get('longitude').value" [mapTypeId]="'hybrid'" [scrollwheel]="false" [zoom]="zoom"
      [usePanning]='true' (mapReady)="mapReady($event)" [draggable]=false>
      <!-- [fullscreenControl]='true'  [mapTypeControl]='true' -->
      <agm-marker [agmFitBounds]="true" [latitude]="this.mapsForm.get('latitude').value"
        [longitude]="this.mapsForm.get('longitude').value"
        [iconUrl]='{"url": iconUrl,"scaledSize": {"height": 35, "width": 35}}'></agm-marker>
    </agm-map>
  </div>
  <div class="overlay col-md-4" style="z-index:1;">
    <div class="alert-box" [formGroup]="mapsForm" [ngClass]="!(show) ? 'visible': 'hidden'">
      <input for="location" formControlName="location" placeholder="Search by location" autocorrect="off"
        autocapitalize="off" spellcheck="off" type="text" class="input-search col-md-12 mt-3" #search
        [formControl]="searchControl">
      <p *ngIf="mapsForm.get('location').errors?.required  && this.submitted==true" class="errorMessage">
        <img class="img-add" src="../../../assets/icons/exclamation_icon.svg"> This field
        is required.
      </p>
      <div class="d-flex row">
        <div class="col-md-6">
          <input for="latitude" formControlName="latitude" type="text" class="input-latitude col-md-12 mt-3"
            placeholder="Latitude" (change)="bla()">
          <div class="mt-1 ml-2 error-message-div text-left">
            <p *ngIf="mapsForm.get('latitude').errors?.required  && this.submitted==true" class="errorMessage">
              <img class="img-add" src="../../../assets/icons/exclamation_icon.svg"> This field
              is required.
            </p>
            <p *ngIf="mapsForm.get('latitude').errors?.pattern" class="errorMessage"><img class="img-add"
                src="../../../assets/icons/exclamation_icon.svg">
              Invalid field</p>
          </div>
        </div>


        <div class="col-md-6">
          <input for="longitude" formControlName="longitude" type="text" class="input-latitude col-md-12 mt-3"
            placeholder="Longitude" (change)="bla()">
          <div class="mt-1 ml-2 error-message-div text-left">
            <p *ngIf="mapsForm.get('longitude').errors?.pattern" class="errorMessage"><img class="img-add"
                src="../../../assets/icons/exclamation_icon.svg">
              Invalid field</p>
            <p *ngIf="mapsForm.get('longitude').errors?.required  && this.submitted==true" class="errorMessage">
              <img class="img-add" src="../../../assets/icons/exclamation_icon.svg"> This field
              is required.
            </p>
          </div>
        </div>


      </div>

      <div class="alert-div xmt-3 text-center">
        <span class="textAddflood">Did you observe flooding in the above location ?</span> <br />
        <button mdbBtn type="button" color="secondary" class="add-alert" rounded="true" (click)="toggle('add')"
          mdbWavesEffect>
          Add Alert</button>
      </div>
    </div>
    <div class="alert-box bg-white text-left" [formGroup]="mapsForm" [ngClass]="(show) ? 'visible': 'hidden'">
      <!-- <div class="text-left"> -->
      <img class="mr-2 pointer" (click)="toggle('')" src="../../../assets/icons/back_icon.svg">
      <span class="alert-text mr-2">Add Flood Alert</span><img src="../../../assets/icons/marker.svg">
      <!-- </div> -->
      <hr class="line-header">
      <div>
        <label for="location" class="alert-location">Location: </label> <span class="alert-text">
          {{mapsForm.get('location').value}}</span> <br /><br />
        <!-- <div xclass="col-md-12"> -->
        <label for="latitude & longitude" class="alert-location">Latitude & Longitude: </label>
        <span class="alert-text"> ({{mapsForm.get('latitude').value}}</span>
        <span class="alert-text"> , {{mapsForm.get('longitude').value}})</span>
        <!-- </div> -->
      </div>
      <div class="date">
        <label class="alert-date">Date</label>
        <mdb-date-picker name="mydate" [inline]="true" auto formControlName="activityDate"
          [options]="myDatePickerOptions" id="mydp" [placeholder]="'Selected date'" required>
        </mdb-date-picker>
        <p *ngIf="mapsForm.get('activityDate').errors?.required  && this.submitted==true" class="errorMessage">
          <img class="img-add" src="../../../assets/icons/exclamation_icon.svg"> This field
          is required.
        </p>
      </div>
      <div>
        <label class="alert-date" for='activityTime'>Time</label>
        <mdb-time-picker #timepicker formControlName="activityTime" id="mytp" [twelvehour]="true"></mdb-time-picker>
        <p *ngIf="mapsForm.get('activityTime').errors?.required  && this.submitted==true" class="errorMessage">
          <img class="img-add" src="../../../assets/icons/exclamation_icon.svg"> This field
          is required.
        </p>
      </div>

      <div class="image_container">

        <div class="form-group">
          <!-- <label for="file">File</label> -->
          <div style="height:55px; display:flex; overflow-x: auto;">
            <img *ngFor='let url of images' [src]="url" height="50px" width="50px" style="margin: 3px;">
          </div>
          <div class="mt-1 error-message-div">
            <p *ngIf="imageFiles.length == null && this.submitted == true" class="errorMessage"><img class="img-add"
                src="../../../assets/icons/exclamation_icon.svg">
              This image is required.</p>
          </div>
          <div class="row" style="margin: 1px;">
            <input id="file" type="file" class="form-control col-9" multiple (change)="onFileChange($event)"
              style="height:45px;">
            <button class="trash bg xml-2 col-3" (click)="deleteImage()"><img
                src="../../assets/icons/trash_icon_grey.svg"></button>
          </div>
          <div class="text-center mt-2">
            <span class="notes mt-2">{{note}}</span><br>
            <span class="notes2 mt-2">{{info}}</span><br>
          </div>
        </div>
      </div>

      <div class="md-form input-group optional" for='experience'>
        <textarea class="form-control" formControlName="experience"
          placeholder="Your experience or message (Optional)"></textarea>
      </div>
      <div class="mt-1 error-message-div">
        <p *ngIf="mapsForm.get('experience').errors?.maxlength" class="errorMessage">
          <img class="img-add" src="../../../assets/icons/exclamation_icon.svg"> This field must not exceed 500
          characters.
        </p>
      </div>
      <div class="text-center">
        <button mdbBtn type="button" color="secondary" class="mr-3" rounded="true" (click)="toggle('')"
          mdbWavesEffect>Cancel</button>
        <button mdbBtn type="button" color="secondary" rounded="true" (click)="addAlert()" mdbWavesEffect>+ Add
          Alert</button>
      </div>
    </div>
  </div>
</div>
